# تعليمات إصلاح الـ API والنشر على Vercel

لقد قمت بتعديل الكود ليتوافق مع بيئة Vercel Serverless. يرجى اتباع الخطوات التالية لتحديث مشروعك:

### 1. الملفات التي تم تعديلها/إنشاؤها:
*   **`vercel.json`**: ملف الإعدادات الجديد لتوجيه الطلبات.
*   **`api/index.js`**: المدخل الجديد لـ Vercel لتشغيل السيرفر.
*   **`server/index.js`**: تم تعديله ليدعم التصدير كـ Module بدلاً من التشغيل المستمر فقط.
*   **`package.json`**: تم تحديثه ليشمل تبعيات السيرفر وأمر بناء Prisma.

### 2. خطوات النشر:
1.  قم برفع هذه التعديلات إلى مستودع GitHub الخاص بك.
2.  اذهب إلى لوحة تحكم Vercel.
3.  تأكد من إعداد المتغيرات البيئية (Environment Variables) التالية في Vercel:
    *   `DATABASE_URL`: رابط قاعدة بيانات Neon (يجب أن ينتهي بـ `?sslmode=require`).
    *   `JWT_SECRET`: مفتاح التشفير الخاص بك.
    *   `VITE_API_URL`: يجب أن يكون رابط موقعك نفسه (مثلاً `https://your-project.vercel.app`).
    *   `KD1S_API_KEY` و `KD1S_API_URL`: لربط الخدمات الخارجية.

### 3. ملاحظة هامة لتطبيق الهاتف:
تأكد من أن قيمة `VITE_API_URL` في إعدادات Vercel هي الرابط الفعلي للموقع، لأن تطبيق الهاتف يعتمد عليها للوصول إلى البيانات.

---
تم الفحص والتأكد من نجاح عملية البناء (Build) محلياً.
